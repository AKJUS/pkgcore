#!/usr/bin/env pkgcore-ebuild-helper

OPTIONS=(
	"--cwd=\"${PWD}\""
	"--dest=\"${INSDESTTREE}\""
	"--insoptions=\"${INSOPTIONS}\""
	"--diroptions=\"${DIROPTIONS}\""
)

if [[ $1 == "-r" ]]; then
	OPTIONS+=( "--recursive" )
	shift
fi

check_args 1 -

if [[ -n ${INSDESTTREE} && -z ${INSDESTTREE%${ED}*} ]]; then
	__helper_exit 2 "do not give \${D} or \${ED} as part of the path arguments to doins"
fi

# python side handles install
__ebd_ipc_cmd ${HELPER_NAME} "${OPTIONS[*]}" "$@"
